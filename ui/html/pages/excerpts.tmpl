{{define "title"}}Excerpts{{end}}

{{define "main"}}
	{{if .Excerpts}}
		<h2>Here are excerpts from my reading that I found interesting...</h2>
		<form action='/excerpts' method='GET'>
			<div>
				<label>Sort:</label>
				<input type='radio' name='sort' value='-id' {{if (eq .Metadata.Sort "-id")}}checked{{end}}> Newest First
				<input type='radio' name='sort' value='id' {{if (eq .Metadata.Sort "id")}}checked{{end}}> Oldest First
			</div>
			<div>
				<label>Author:</label>
				<select name='author'>
						<option value=''>Any</option>
					{{range .Metadata.Authors}}
						<option value='{{.}}' {{if (eq $.Metadata.SelectedAuthor .)}}selected{{end}}>{{.}}</option>
					{{end}}
				</select>
			</div>
			<div>
				<label>Page:</label>
				<select name='page'>
					{{range pageRange .Metadata.LastPage}}
						<option value='{{.}}' {{if (eq $.Metadata.CurrentPage .)}}selected{{end}}>{{.}}</option>
					{{end}}
				</select>
				<label style='margin-left: 10px;'>Page Size:</label>
				<select name='page_size'>
					{{range pageSizes}}
						<option value='{{.}}' {{if (eq $.Metadata.PageSize .)}}selected{{end}}>{{.}}</option>
					{{end}}
				</select>
			</div>
			<div>
				<input type='submit' value='Submit'>
				<a href='/excerpts'>Reset</a>
			</div>
		</form>
		<a href='#' class='stt' title='Scroll to top'><img src='static/img/arrow.png'/></a>
		{{range .Excerpts}}
			<div class='text-box'>
				<div class='metadata'>
					<a href='/excerpts/{{.ID}}'>
						<strong>{{.Author}}</strong>
						<br>
						<strong>{{.Work}}</strong>
					</a>
				</div>
				<hr />
				<div class='body'>{{markdownToHTML .Body}}</div>
			</div>
			<br>
		{{end}}
	{{else}}
		<p>There's nothing to see here... yet!</p>
	{{end}}
{{end}}
