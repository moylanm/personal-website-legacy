{{define "title"}}Excerpts{{end}}

{{define "main"}}
	{{if .Excerpts}}
		<h2>Here are excerpts from my reading that I thought were worth sharing...</h2>
		<form action='/excerpts' method='GET'>
			<div>
				<label>Sort:</label>
				<input type='radio' id='r1' name='sort' value='-id' {{if (eq .Metadata.Sort "-id")}}checked{{end}}>
				<label for='r1'>Newest First</label>
				<input type='radio' id='r2' name='sort' value='id' {{if (eq .Metadata.Sort "id")}}checked{{end}}>
				<label for='r2'>Oldest First</label>
			</div>
			<div>
				<label>Author:</label>
				<select name='author'>
						<option value=''>Any</option>
					{{range .Metadata.Authors}}
						<option value='{{.}}' {{if (eq $.Metadata.SelectedAuthor .)}}selected{{end}}>{{.}}</option>
					{{end}}
				</select>
			</div>
			<div>
				<label>Page:</label>
				<select name='page'>
					{{range pageRange .Metadata.LastPage}}
						<option value='{{.}}' {{if (eq $.Metadata.CurrentPage .)}}selected{{end}}>{{.}}</option>
					{{end}}
				</select>
				<label style='margin-left: 10px;'>Page Size:</label>
				<select name='page_size'>
					{{range pageSizes}}
						<option value='{{.}}' {{if (eq $.Metadata.PageSize .)}}selected{{end}}>{{.}}</option>
					{{end}}
				</select>
			</div>
			<div>
				<input type='submit' value='Submit'>
				<a href='/excerpts'>Reset</a>
			</div>
		</form>
		<a href='#' class='rtt' title='Return to top'><img src='static/img/arrow.png'/></a>
		<div class='arrows'>
			{{if (gt .Metadata.CurrentPage 1)}}
				<a href='/excerpts?sort={{.Metadata.Sort}}&author={{.Metadata.SelectedAuthor}}&page={{dec .Metadata.CurrentPage}}&page_size={{.Metadata.PageSize}}' class='left-arrow' title='Previous page'><img src='static/img/left-arrow.png'></a>
			{{end}}
			{{if (lt .Metadata.CurrentPage .Metadata.LastPage)}}
				<a href='/excerpts?sort={{.Metadata.Sort}}&author={{.Metadata.SelectedAuthor}}&page={{inc .Metadata.CurrentPage}}&page_size={{.Metadata.PageSize}}' class='right-arrow' title='Next page'><img src='static/img/right-arrow.png'></a>
			{{end}}
		</div>
		{{range .Excerpts}}
			<div class='text-box'>
				<div class='metadata'>
					<a href='/excerpts/{{.ID}}'>
						<strong>{{.Author}}</strong>
						<br>
						<strong>{{.Work}}</strong>
					</a>
				</div>
				<hr />
				<div class='body'>{{markdownToHTML .Body}}</div>
			</div>
			<br>
		{{end}}
		<div class='arrows'>
			{{if (gt .Metadata.CurrentPage 1)}}
				<a href='/excerpts?sort={{.Metadata.Sort}}&author={{.Metadata.SelectedAuthor}}&page={{dec .Metadata.CurrentPage}}&page_size={{.Metadata.PageSize}}' class='left-arrow' title='Previous page'><img src='static/img/left-arrow.png'></a>
			{{end}}
			{{if (lt .Metadata.CurrentPage .Metadata.LastPage)}}
				<a href='/excerpts?sort={{.Metadata.Sort}}&author={{.Metadata.SelectedAuthor}}&page={{inc .Metadata.CurrentPage}}&page_size={{.Metadata.PageSize}}' class='right-arrow' title='Next page'><img src='static/img/right-arrow.png'></a>
			{{end}}
		</div>
	{{else}}
		<p>There's nothing to see here... yet!</p>
	{{end}}
{{end}}
